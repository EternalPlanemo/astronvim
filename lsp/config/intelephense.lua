return {
  on_attach = function(client, bufnr)
    if (client.resolved_capabilities ~= nil) then
      client.resolved_capabilities.document_formatting = false
    end
  end,
  settings = {
    intelephense = {
      environment = {
        phpVersion = "8.1.0",
      },
      files = {
        maxSize = 2000000,
      },
      completion = {
        maxItems = 100,
      },
      format = {
        enable = false,
      },
      stubs = {
        "imagick",
         "amqp",
         "apache",
         "apcu",
         "bcmath",
         "bz2",
         "calendar",
         "cassandra",
         "com_dotnet",
         "Core",
         "couchbase",
         "crypto",
         "ctype",
         "cubrid",
         "curl",
         "date",
         "dba",
         "dom",
         "enchant",
         "Ev",
         "event",
         "exif",
         "fann",
         "FFI",
         "ffmpeg",
         "fileinfo",
         "filter",
         "fpm",
         "ftp",
         "gd",
         "gearman",
         "geoip",
         "geos",
         "gettext",
         "gmagick",
         "gmp",
         "gnupg",
         "grpc",
         "hash",
         "http",
         "ibm_db2",
         "iconv",
         "igbinary",
         "imagick",
         "imap",
         "inotify",
         "interbase",
         "intl",
         "json",
         "judy",
         "ldap",
         "leveldb",
         "libevent",
         "libsodium",
         "libxml",
         "lua",
         "mailparse",
         "mapscript",
         "mbstring",
         "mcrypt",
         "memcache",
         "memcached",
         "meminfo",
         "meta",
         "ming",
         "mongo",
         "mongodb",
         "mqseries",
         "msgpack",
         "mssql",
         "mysql",
         "mysql_xdevapi",
         "mysqli",
         "ncurses",
         "newrelic",
         "oauth",
         "oci8",
         "odbc",
         "openssl",
         "parallel",
         "Parle",
         "pcntl",
         "pcov",
         "pcre",
         "pdflib",
         "PDO",
         "pdo_ibm",
         "pdo_mysql",
         "pdo_pgsql",
         "pdo_sqlite",
         "pgsql",
         "Phar",
         "posix",
         "pspell",
         "pthreads",
         "radius",
         "rar",
         "rdkafka",
         "readline",
         "recode",
         "redis",
         "Reflection",
         "regex",
         "rrd",
         "SaxonC",
         "session",
         "shmop",
         "SimpleXML",
         "snmp",
         "soap",
         "sockets",
         "sodium",
         "solr",
         "SPL",
         "SplType",
         "SQLite",
         "sqlite3",
         "sqlsrv",
         "ssh2",
         "standard",
         "stomp",
         "suhosin",
         "superglobals",
         "svn",
         "sybase",
         "sync",
         "sysvmsg",
         "sysvsem",
         "sysvshm",
         "tidy",
         "tokenizer",
         "uopz",
         "uv",
         "v8js",
         "wddx",
         "win32service",
         "winbinder",
         "wincache",
         "wordpress",
         "xcache",
         "xdebug",
         "xhprof",
         "xml",
         "xmlreader",
         "xmlrpc",
         "xmlwriter",
         "xsl",
         "xxtea",
         "yaf",
         "yaml",
         "yar",
         "zend",
         "Zend OPcache",
         "ZendCache",
         "ZendDebugger",
         "ZendUtils",
         "zip",
         "zlib",
         "zmq",
         "zookeeper",
      }
    }
  }
}
